swagger: '2.0'
info:
  description: SSkey pasword manager
  version: 1.0.0
  title: SSkey pasword manager
  termsOfService: 'http://swagger.io/terms/'
  contact:
    email: glushko311@gmail.com
  license:
    name: 'Flask, Postgresql'
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
host: '127.0.0.1:5000'
basePath: /
tags:
  - name: sskey
    description: Save your passwords and get its anywhere
    externalDocs:
      description: Find out more
      url: 'http://swagger.io'
  - name: password
    description: Save your passwords and get its anywhere
schemes:
  - http
paths:
  /smoke:
    get:
      tags:
        - smoke
      summary: Test is containers works
      operationId: smoke
      produces:
        - application/json
      parameters: []
      responses:
        '200':
          description: OK
  /users:
    post:
      tags:
        - users
      summary: Create user
      description: This can only be done by the logged in user.
      operationId: createUser
      produces:
        - application/json
      parameters:
        - in: query
          name: username
          required: true
          type: string
          description: The user login.
        - in: query
          name: email
          required: true
          type: string
          description: The user email.
        - in: query
          name: password
          required: true
          type: string
          description: The user password.
        - in: query
          name: first_name
          required: false
          type: string
          description: The user first name.
        - in: query
          name: last_name
          required: false
          type: string
          description: The user last name.
        - in: query
          name: phone
          required: false
          type: string
          description: The user phone.
      responses:
        default:
          description: successful operation
  /users/{user_id}:
    get:
      tags:
        - users
      summary: User by id
      description: Get User by id
      operationId: getUser
      produces:
        - application/json

      parameters:
        - in: path
          name: user_id
          required: true
          type: integer
          format: int64
          description: The user id.
      responses:
        '200':
          description: successful operation
          schema:
            type: array
            items:
              $ref: '#/definitions/User'
        '404':
          description: user not found
    delete:
      tags:
        - users
      summary: Delete user
      description: delete user by user_id.
      operationId: deleteUser
      produces:
        - application/json
      parameters:
        - in: path
          name: user_id
          required: true
          type: integer
          format: int64
          description: The user login.
      responses:
        '200':
          description: User with id=%id% has been deleted
        '400':
          description: User id not given
  /users/{user_id}/passwords/{pass_id}:
    get:
      tags:
        - password
      summary: Password by user_id and password_id
      description: Get password by user_id and password_id
      operationId: getPasswords
      produces:
        - application/json

      parameters:
        - in: path
          name: user_id
          required: true
          type: integer
          format: int64
          description: The user id.
        - in: path
          name: pass_id
          required: true
          type: integer
          format: int64
          description: The password id.
      responses:
        '200':
          description: successful operation
          schema:
            type: array
            items:
              $ref: '#/definitions/Password'
        '404':
          description: user not found
definitions:
  User:
    type: object
    properties:
      id:
        type: integer
        format: int64
      username:
        type: string
      email:
        type: string
      password:
        type: string
      salt:
        type: string
      first_name:
        type: string
      last_name:
        type: string
      phone:
        type: string
      reg_date:
        type: string
      auth_date:
        type: string
    example:
      id: 1
      username: petr
      email: petr33@mail.ru
      first_name: Petr
      last_name: Petrov
      phone: 666-777-444
      register_date: 2018-07-30T14:55:52.525Z
      auth_date: 2018-07-30T14:55:52.525Z

  Password:
    type: object
    properties:
      pass_id:
        type: integer
        format: int64
      url:
        type: string
      title:
        type: string
      login:
        type: string
      password:
        type: string
      comment:
        type: string

    example:
      pass_id: 1
      url: http://www.google.com.ua
      title: google account
      login: Petr
      password: petr777
      comment: my google account

